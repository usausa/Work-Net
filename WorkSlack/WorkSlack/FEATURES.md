# WorkSlack — 機能一覧と強化ポイント

## 実装済み機能

### レイアウト / 構造
- [x] Slackライクな3ペインレイアウト（サイドバー + メインコンテンツ）
- [x] 全画面ビューポート（100vh × 100vw）
- [x] サイドバー固定幅 260px + メインコンテンツ可変幅

### サイドバー（Sidebar）
- [x] ダークパープル背景（#3f0e40）のSlackカラースキーム
- [x] ワークスペース名 & 現在のユーザー名表示
- [x] 新規メッセージ作成ボタン（compose）
- [x] ナビゲーションショートカット（Threads, Drafts, Saved items, More）
- [x] チャンネル一覧（#プレフィックス付き）
- [x] ダイレクトメッセージ一覧（アバター + ステータス付き）
- [x] セクションの折りたたみ/展開（Channels, Direct messages）
- [x] アクティブチャンネルのハイライト表示
- [x] 「Add channels」「Add teammates」リンク

### チャンネルビュー（ChannelView）
- [x] チャンネルヘッダー（名前 + トピック + メンバー数）
- [x] チャンネル/DM切替時のイントロメッセージ
- [x] メッセージ一覧のスクロール表示
- [x] メッセージ送信後の自動スクロール
- [x] チャンネル別プレースホルダー（"Message #general" 等）

### メッセージ表示（MessageItem）
- [x] アバター + 著者名 + タイムスタンプのヘッダー
- [x] 同一著者の連続メッセージのグルーピング（5分以内）
- [x] グループ内メッセージのホバー時タイムスタンプ表示
- [x] 今日/昨日/日付のタイムスタンプフォーマット
- [x] 絵文字リアクションチップ（カウント付き）
- [x] 自分のリアクションのアクティブ表示
- [x] リアクションのクリックによるトグル

### メッセージ入力（MessageInput）
- [x] フォーマットツールバー（Bold, Italic, Strikethrough, Link, List）
- [x] テキストエリア（プレースホルダー付き）
- [x] フッターアクション（添付, 絵文字, メンション）
- [x] 送信ボタン（入力空時は無効化）
- [x] Enterキーで送信、Shift+Enterで改行

### ユーザーアバター（UserAvatar）
- [x] カラー背景 + イニシャル表示
- [x] 3サイズ対応（Small / Medium / Large）
- [x] オンラインステータスインジケーター（Online / Away / DND / Offline）

### データ層（Services / Models）
- [x] IChatService インターフェースによるサービス分離
- [x] インメモリ実装（ChatService）& シードデータ
- [x] 6ユーザー、5チャンネル、3 DM、30+ メッセージ
- [x] メッセージ送信機能
- [x] リアクション追加機能
- [x] Singleton DI 登録

---

## 未実装機能

### UI / UX — 高優先度（Slackらしさに直結）
- [ ] **メッセージホバー時のアクションツールバー** — Slackではメッセージにホバーすると右上に絵文字リアクション追加・スレッド返信・共有・もっと見る等のフローティングツールバーが表示される
- [ ] **日付区切り線（Date divider）** — メッセージリスト内で日付が変わる箇所に「Yesterday」「Monday, June 9th」等の区切り線を挿入
- [ ] **未読メッセージバッジ** — サイドバーのチャンネル名横に未読数バッジを表示、太字で未読チャンネルを区別
- [ ] **タイピングインジケーター** — 入力エリアの上に「Hanako is typing...」のような表示
- [ ] **サイドバーのリサイズ** — ドラッグによるサイドバー幅の調整
- [ ] **検索バー** — ヘッダー上部のグローバル検索UI
- [ ] **ワークスペースアイコン** — サイドバー左端の1文字アイコン列（Slackのワークスペース切替バー）

### UI / UX — 中優先度
- [ ] **スレッド（Thread）** — メッセージへの返信をサイドパネルで表示
- [ ] **絵文字ピッカー** — リアクション追加用のポップアップ絵文字セレクター
- [ ] **ユーザープロフィールポップアップ** — アバターや名前クリック時にプロフィールカードを表示
- [ ] **メッセージ編集・削除** — 自分のメッセージの編集/削除UI（`IsEdited` フラグは既にモデルに存在）
- [ ] **メッセージ内のリンクプレビュー** — URLの埋め込みプレビュー（OGP）
- [ ] **メッセージ内のコードブロック/マークダウン** — `` `code` ``, `**bold**`, `_italic_` 等の書式レンダリング
- [ ] **@メンション** — ユーザー名のハイライト表示 & メンション候補のサジェスト
- [ ] **右サイドパネル** — チャンネル詳細、メンバーリスト、ピン留めメッセージ等を表示するスライドパネル
- [ ] **カスタムステータス** — 絵文字 + テキストのユーザーカスタムステータス（☕ "On lunch" 等）

### UI / UX — 低優先度
- [ ] **ダークモード** — カラースキームの切替対応
- [ ] **ファイルアップロードプレビュー** — 画像/ファイルの添付表示
- [ ] **ピン留めメッセージ** — 重要メッセージのピン留め
- [ ] **ブックマーク（Saved items）** — メッセージの保存機能
- [ ] **チャンネル作成/編集モーダル** — 新規チャンネルの作成UI
- [ ] **DM作成** — 新規DM相手の選択UI
- [ ] **通知音/デスクトップ通知** — メッセージ受信時の通知
- [ ] **キーボードショートカット** — Ctrl+K（検索ジャンプ）, Ctrl+Shift+M（メンション一覧）等
- [ ] **メッセージのVirtualization** — 大量メッセージ時のパフォーマンス最適化
- [ ] **レスポンシブ/モバイル対応** — 画面幅に応じたサイドバーの折りたたみ
- [ ] **カスタム絵文字** — ワークスペース独自の絵文字

### データ / バックエンド
- [ ] **リアルタイム更新（SignalR）** — 他ユーザーのメッセージ/リアクションのリアルタイム反映
- [ ] **永続化ストレージ** — DB/ファイルへのデータ保存
- [ ] **認証/認可** — ユーザーログイン機能
- [ ] **メッセージ検索** — 全文検索機能
- [ ] **メッセージページネーション** — 無限スクロールでの過去メッセージ遅延読み込み
- [ ] **リアクション解除** — 既存リアクションのトグル解除
- [ ] **チャンネルメンバー管理** — チャンネル毎のメンバー追加/削除
- [ ] **既読管理** — ユーザー毎のチャンネル既読位置追跡

---

## 強化ポイント詳細（推奨実装順）

以下はSlackらしさを向上させるために最もインパクトの大きい改善点です。

### 1. メッセージホバーアクションツールバー ⭐⭐⭐
Slackの最も特徴的なUIの一つ。メッセージにマウスホバーすると右上にフローティングでアクションボタンが表示される。

```
┌──────────────────────────────────────────────────┐
│  😀  💬  ↗  ⋯  │  ← フローティングツールバー
│ ┌─────┐                                          │
│ │ Avatar │ Author Name  10:30 AM                 │
│ └─────┘ Message content here...                  │
└──────────────────────────────────────────────────┘
```

**必要な作業**: MessageItem にホバー検知 + 絶対配置のアクションバーを追加

### 2. 日付区切り線 ⭐⭐⭐
メッセージリスト内で日付が変わる箇所に水平線 + 日付ラベルを表示。Slackでは全チャンネルで常に表示される基本要素。

```
─────────── Yesterday ───────────
─────────── Today ───────────
```

**必要な作業**: ChannelView のメッセージループ内で前メッセージとの日付比較を追加

### 3. 未読バッジ & 太字チャンネル名 ⭐⭐⭐
サイドバーで未読メッセージがあるチャンネルを太字 + バッジで表現。これによりサイドバーの情報密度がSlackに近づく。

**必要な作業**: ChatService に既読位置追跡を追加 + Sidebar に未読UI反映

### 4. 絵文字ピッカーポップアップ ⭐⭐
現在はリアクションの追加手段が限定的。ポップアップで絵文字を選択できると大幅にSlackらしくなる。

**必要な作業**: 絵文字データの定義 + クリック位置基準のポップアップコンポーネント

### 5. Markdown/書式レンダリング ⭐⭐
メッセージ内の `*bold*`, `_italic_`, `` `code` ``, `> quote` 等をHTMLに変換して表示。

**必要な作業**: 簡易Markdownパーサーまたは正規表現ベースの書式変換

### 6. スレッド返信 ⭐⭐
メッセージへの返信を右サイドパネルで表示。Slackの核心機能の一つ。

**必要な作業**: ChatMessage に ParentId フィールド追加 + スレッドパネルコンポーネント

### 7. 検索バー ⭐
ヘッダーにグローバル検索UIを追加。実際の検索が未実装でも、UIがあるだけでSlackらしさが増す。

**必要な作業**: ヘッダーコンポーネントに検索入力UI追加

### 8. ワークスペースアイコンバー ⭐
サイドバーの左端に縦1列のワークスペースアイコン列を追加。

```
┌──┬───────────┬──────────────────────────┐
│W │ Sidebar   │ Channel View             │
│S │           │                          │
│  │           │                          │
└──┴───────────┴──────────────────────────┘
```

**必要な作業**: アイコンバーコンポーネント + レイアウト調整
